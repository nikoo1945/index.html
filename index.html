<!doctype html>
<html lang="id">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Toko Cookies - Versi Sederhana</title>
    <style>
        :root {
            --bg: #fafafa;
            --card: #fff;
            --accent: #ff8c00
        }

        * {
            box-sizing: border-box;
            font-family: Segoe UI, Roboto, Arial, sans-serif
        }

        body {
            margin: 0;
            background: var(--bg);
            color: #222;
            padding: 16px
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center
        }

        h1 {
            margin: 0;
            font-size: 20px
        }

        .cart {
            background: var(--card);
            padding: 8px 12px;
            border-radius: 8px;
            border: 1px solid #eee
        }

        .products {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 12px;
            margin-top: 16px
        }

        .p {
            background: var(--card);
            padding: 12px;
            border-radius: 8px;
            border: 1px solid #eee
        }

        .p h3 {
            margin: 0 0 6px 0
        }

        .p .price {
            font-weight: 700;
            margin-top: 8px
        }

        button {
            background: var(--accent);
            color: #fff;
            border: 0;
            padding: 8px 10px;
            border-radius: 6px;
            cursor: pointer
        }

        .cart-area {
            margin-top: 16px;
            background: #fff;
            padding: 12px;
            border-radius: 8px;
            border: 1px solid #eee
        }

        .cart-list {
            list-style: none;
            padding: 0;
            margin: 0
        }

        .cart-list li {
            display: flex;
            justify-content: space-between;
            padding: 6px 0;
            border-bottom: 1px dashed #eee
        }

        .actions {
            display: flex;
            gap: 8px;
            justify-content: flex-end;
            margin-top: 8px
        }

        @media (max-width:480px) {
            body {
                padding: 10px
            }
        }
    </style>
</head>

<body>
    <header>
        <h1>Toko Cookies (Sederhana)</h1>
        <div class="cart">Keranjang: <span id="count">0</span> item</div>
    </header>

    <main>
        <section class="products" id="products"></section>

        <section class="cart-area" id="cart-area">
            <h2>Keranjang</h2>
            <ul class="cart-list" id="cart-list"></ul>
            <div class="cart-summary">Total: Rp <span id="total">0</span></div>
            <div class="actions">
                <button id="checkout">Checkout</button>
                <button id="clear" style="background:#888">Kosongkan</button>
            </div>
        </section>
    </main>

    <script>
        const PRODUCTS = [
            { id: 1, name: 'Chocolate Chip', price: 25000, desc: 'Klasik, penuh cokelat' },
            { id: 2, name: 'Oatmeal Raisin', price: 22000, desc: 'Tekstur lembut & sehat' },
            { id: 3, name: 'Peanut Butter', price: 26000, desc: 'Gurih kacang tanah' }
        ];

        const q = s => document.querySelector(s);
        const productsEl = q('#products');
        const cartListEl = q('#cart-list');
        const totalEl = q('#total');
        const countEl = q('#count');
        const checkoutBtn = q('#checkout');
        const clearBtn = q('#clear');

        let cart = JSON.parse(localStorage.getItem('simple_cart') || '{}');

        function save() { localStorage.setItem('simple_cart', JSON.stringify(cart)); renderCart(); }

        function add(id) { cart[id] = (cart[id] || 0) + 1; save(); }
        function remove(id) { delete cart[id]; save(); }
        function change(id, qty) { if (qty <= 0) remove(id); else { cart[id] = qty; save(); } }

        function renderProducts() {
            productsEl.innerHTML = '';
            PRODUCTS.forEach(p => {
                const el = document.createElement('div'); el.className = 'p';
                el.innerHTML = `<h3>${p.name}</h3><div>${p.desc}</div><div class="price">Rp ${p.price.toLocaleString()}</div><div style="margin-top:8px"><button data-id="${p.id}">Tambah</button></div>`;
                el.querySelector('button').addEventListener('click', () => add(p.id));
                productsEl.appendChild(el);
            });
        }

        function renderCart() {
            const items = Object.keys(cart).map(id => {
                const p = PRODUCTS.find(x => x.id == id);
                return { ...p, qty: cart[id] };
            });
            cartListEl.innerHTML = items.length ? items.map(i => `<li><div><strong>${i.name}</strong><div style="font-size:12px;color:#666">Rp ${i.price.toLocaleString()} x ${i.qty}</div></div><div><button data-minus="${i.id}">-</button> <button data-plus="${i.id}">+</button> <button data-remove="${i.id}" style="background:#c0392b">Hapus</button></div></li>`).join('') : '<li>Keranjang kosong</li>';

            cartListEl.querySelectorAll('button[data-plus]').forEach(b => b.addEventListener('click', e => { const id = e.target.dataset.plus; change(id, (cart[id] || 0) + 1); }));
            cartListEl.querySelectorAll('button[data-minus]').forEach(b => b.addEventListener('click', e => { const id = e.target.dataset.minus; change(id, (cart[id] || 0) - 1); }));
            cartListEl.querySelectorAll('button[data-remove]').forEach(b => b.addEventListener('click', e => { remove(e.target.dataset.remove); }));

            const total = items.reduce((s, i) => s + i.qty * i.price, 0);
            totalEl.textContent = total.toLocaleString();
            countEl.textContent = items.reduce((s, i) => s + i.qty, 0);
        }

        checkoutBtn.addEventListener('click', () => {
            const items = Object.keys(cart);
            if (items.length === 0) { alert('Keranjang kosong'); return; }
            const name = prompt('Nama penerima:');
            if (!name) return;
            const itemsArr = Object.keys(cart).map(id => { const p = PRODUCTS.find(x => x.id == id); return `${cart[id]} x ${p.name}`; }).join('\n');
            const total = Object.keys(cart).reduce((s, id) => s + cart[id] * PRODUCTS.find(x => x.id == id).price, 0);
            alert(`Terima kasih, ${name}!\nPesanan:\n${itemsArr}\nTotal: Rp ${total.toLocaleString()}`);
            cart = {}; save();
        });

        clearBtn.addEventListener('click', () => { if (confirm('Kosongkan keranjang?')) { cart = {}; save(); } });

        renderProducts(); renderCart();
    </script>
</body>

</html>